{% extends 'base.html' %}
{% block title %}Resultados de búsqueda{% endblock %}

{% block content %}
<div class="container">
  <h2>Resultados para "{{ query }}"</h2>
  {% if productos and productos|length > 0 %}
  <div class="products-grid">
    {% for producto in productos %}
    <div class="product-card">
      <a href="{{ url_for('main.producto_detalle', producto_id=producto.id_producto) }}">
        <img class="img-fallback" data-fallback="{{ url_for('static', filename='images/product-placeholder.svg') }}" src="{{ producto.web_imagen_url }}" alt="{{ producto.nombre }}">
      </a>

      <div class="product-info">
        <h3 class="product-title">{{ producto.nombre }}</h3>
        <p class="product-description">{{ producto.descripcion[:240] }}{% if producto.descripcion|length > 240 %}...{% endif %}</p>
        <p class="price">${{ '%.2f'|format(producto.precio_unitario or 0) }}</p>
        <p class="meta">Categoria: {{ producto.categoria.nombre if producto.categoria else 'Sin categoría' }} • Stock: {{ producto.cantidad_stock or 0 }} {{ producto.unidad or '' }}</p>
        {# garantia ocultada intencionalmente #}
  <a class="btn" href="{{ url_for('main.producto_detalle', producto_id=producto.id_producto) }}">Ver detalle</a>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <p>No se encontraron productos que coincidan con tu búsqueda.</p>
  {% endif %}
</div>
{% endblock %}
